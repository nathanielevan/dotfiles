# Documentation is also available online with the entry numbers at https://neomutt.org/guide/reference

# Inspired by Steffen Rademacker and Luke Smith, with personal modifications
# General account and mailbox settings
set real_name = "Nathaniel Evan"
set from = "nathanielevan@zohomail.com"
set sendmail = "msmtp -a zoho"
alias me Nathaniel Evan <nathanielevan@zohomail.com>
set folder = /home/nate/.local/share/mail/zoho
set header_cache = /home/nate/.cache/neomutt/zoho/headers
set message_cache_dir = /home/nate/.cache/neomutt/zoho/bodies
set tmp_dir = /home/nate/.cache/neomutt/zoho/temp
set mbox_type = Maildir
set spool_file = "+Inbox"
set postponed = "+Drafts"
set record = "+Sent"
set trash = "+Trash"
mailboxes "=Inbox" "=Drafts" "=NewsLetter" "=Notification" "=Sent" "=Spam" "=Templates" "=Trash"

# Basic Mutt behavior options
set delete		# automatically act on messages marked for deletion (3.110)
set quit		# actually quit from neomutt without having to confirm (3.387)
set thorough_search	# decode header and body of messages before searching (3.517)
set sleep_time = 0	# disable pause while displaying informational messages (3.453)
set mail_check_stats	# calculate message stats of a mailbox while polling (3.225)
unset wait_key		# shut your trap, mutt, just do what i say, will you? (3.546)
unset confirm_append	# don't ask for confirm when moving mails into a mailbox (3.68)
unset mark_old		# don't mark unread messages as old if i don't read them (3.235)
unset copy		# don't save sent emails, zoho takes care of this already (3.74)

# Compose/view options
set date_format = "%d-%b-%y"				# change date format (3.106)
set index_format="%4C %Z %?X?A& ? %D %-15.15F %s (%c)"	# define index format (3.218)
set sort = "reverse-date"				# sort by date in descending order (3.486)
set include						# include original message in reply (3.212)
set forward_quote					# include original message when forwarding (3.150)
set forward_format = "Fwd: %s"				# format of subject when forwarding (3.149)
set mime_forward					# forward attachments with mail (3.254)
set fast_reply						# don't ask for recipient and subject when replying (3.128)
set reverse_name					# reply as whomever it was originally to (3.408)
set reply_to						# reply to address set in Reply-to: header (3.402)
set edit_headers					# allows editing the header of outgoing message (3.119)
set ask_cc						# prompt for cc recipients before editing message (3.18)
unset markers						# don't display + at the beginning of warped lines (3.236)
set editor = "nvim"					# set editor to nvim (3.120)
set pager_context = 5					# display last N lines from prev page into next page (3.299)
set tilde						# display tildes at the end of a mail (3.519)
set pager_stop						# don't move to next msg upon reaching end of msg (3.304)
set menu_scroll					# don't redraw the entire menu when scrolling (3.243)

# Viewing attachments + those pesky HTML e-mails
set mailcap_path = /home/nate/.config/neomutt/mailcap
alternative_order text/plain text/enriched text/html
auto_view text/html

# E-mail headers
ignore *					# ignore all headers... (12.2)
unignore from: to: cc: bcc: date: subject:	# ...except these headers (12.2)
unhdr_order *					# clear all previous header orders, if exists (12.3)
hdr_order from: to: cc: bcc: date: subject: 	# and use this header order instead (12.3)

# Sidebar
set sidebar_visible				# show sidebar (3.442)
set sidebar_width = 22				# sidebar width in screen columns (3.443)
set sidebar_short_path				# only display the name of the mailbox (3.439)
set sidebar_divider_char = " "			# define divider character for sidebar (3.431)
set sidebar_format = '%B%* [%?N?%N/?%S]'	# define sidebar format (3.433)

# Keybinds and macros
# Additional note: Ctrl-G will quit most prompts (Getting Started 4.1)
# <save-message> (s) moves a mail from one folder to another
# In pager: after searching with "/", press \ to toggle highlighting of search matches (Getting Started 5.2)
bind index,pager \Cp sidebar-prev-new
bind index,pager \Cn sidebar-next-new
bind index,pager \Cj sidebar-next
bind index,pager \Ck sidebar-prev
bind index,pager \Co sidebar-open
bind index \Cf noop
bind index,pager R group-reply
bind index,pager B sidebar-toggle-visible
bind index,pager,attach i display-toggle-weed
bind index j next-entry
bind pager j next-line
bind index k previous-entry
bind pager k previous-line
bind index \Cl limit
bind index l display-message
bind pager l view-attachments
bind attach l view-mailcap
bind browser l select-entry
bind index,pager \Cu half-up
bind index,pager \Cd half-down
bind index D delete-message
bind index U undelete-message
bind index,pager g noop
bind index gg first-entry
bind pager gg top
bind index G last-entry
bind pager G bottom
bind index h noop
bind pager,attach h exit
bind index <tab> sync-mailbox
bind index,pager @ compose-to-sender

macro index O "<shell-escape>mbsync -a -c $XDG_CONFIG_HOME/isync/mbsyncrc && notmuch new<enter>" "sync emails and index them"
macro index,pager gi "<change-folder>=Inbox<enter>" "go to inbox"
macro index,pager gl "<change-folder>=NewsLetter<enter>" "go to newsletter"
macro index,pager gn "<change-folder>=Notification<enter>" "go to notification"
macro index,pager gt "<change-folder>=Trash<enter>" "go to trash"
macro browser h "<change-dir><kill-line>..<enter>" "go to parent folder"
macro index \Cr "<tag-pattern>~U<enter><tag-prefix><clear-flag>N<untag-pattern>.<enter>" "mark all unread messages as read"
macro index \Ca "<limit>all\n" "undo limit and show all messages"

# Color configuration

# Default index colors:
color index blue default '.*'
color index_number lightblack default '.*'
color index_flags red default '.*'
color index_date blue default '.*'
color index_author magenta default '.*'
color index_subject yellow default '.*'

# New mail is boldened:
color index bold blue default "~N"
color index_number bold lightblack default '~N'
color index_flags bold red default '~N'
color index_date bold blue default '~N'
color index_author bold magenta default "~N"
color index_subject bold yellow default "~N"

# Tagged mails will appear yellow:
color index bold yellow default "~T"
color index_number bold yellow default '~T'
color index_flags bold yellow default '~T'
color index_date bold yellow default '~T'
color index_author bold yellow default "~T"
color index_subject bold yellow default "~T"

# Mails marked as deleted will appear red:
color index bold red default "~D"
color index_number bold red default "~D"
color index_flags bold red default "~D"
color index_date bold red default "~D"
color index_author bold red default "~D"
color index_subject bold red default "~D"

# Other colors and aesthetic settings:
mono bold bold
mono underline underline
mono indicator reverse
mono error bold
color normal default default
color indicator bold reverse yellow default
color sidebar_highlight red default
color sidebar_divider black default
color sidebar_flagged yellow default
color sidebar_new green default
color error red default
color tilde black default
color message yellow default
color markers red white
color attachment green default
color search bold magenta default
color status bold default default
color hdrdefault bold default default
color quoted yellow default
color quoted1 green default
color quoted2 cyan default
color quoted3 blue default
color quoted4 magenta default
color quoted5 red default
color signature bold yellow default
color bold black default
color underline black default

# Regex highlighting:
color header bold default default ".*"
color header bold magenta default "^(From)"
color header bold lightblack default "^(To)"
color header bold blue default "^(Date)"
color header bold yellow default "^(Subject)"
color header bold default default "^(CC|BCC)"
color body bold magenta default "[\-\.+_a-zA-Z0-9]+@[\-\.a-zA-Z0-9]+" # Email addresses
color body bold blue default "(https?|ftp)://[\-\.,/%~_:?&=\#a-zA-Z0-9]+" # URL
color body green default "\`[^\`]*\`" # Green text between ` and `
color body bold blue default "^# \.*" # Headings as bold blue
color body bold cyan default "^## \.*" # Subheadings as bold cyan
color body bold green default "^### \.*" # Subsubheadings as bold green
color body yellow default "^(\t| )*(-|\\*) \.*" # List items as yellow
color body bold cyan default "[;:][-o][)/(|]" # emoticons
color body bold cyan default "[;:][)(|]" # emoticons
color body bold cyan default "[ ][*][^*]*[*][ ]?" # more emoticon?
color body bold cyan default "[ ]?[*][^*]*[*][ ]" # more emoticon?
color body red default "(BAD signature)"
color body cyan default "(Good signature)"
color body bold black default "^gpg: Good signature .*"
color body bold yellow default "^gpg: "
color body bold yellow red "^gpg: BAD signature from.*"
mono body bold "^gpg: Good signature"
mono body bold "^gpg: BAD signature from.*"
