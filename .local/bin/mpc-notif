#!/bin/sh

MPD_LIBRARY="${HOME}/Music"
MPC_TEMP="/tmp/ncmpcpp"
mkdir -p "$MPC_TEMP"

trackData=$(mpc --format '%file%\n%title%\n%artist%\n%album%' current)
trackFile=$(echo "$trackData" | head -1)
trackTitle=$(echo "$trackData" | head -2 | tail -1)
trackArtist=$(echo "$trackData" | tail -2 | head -1)
trackAlbum=$(echo "$trackData" | tail -1)

rm -f "${MPC_TEMP}/mpc-playing.jpg" && ffmpeg -y -i "${MPD_LIBRARY}/${trackFile}" -an -c:v copy "${MPC_TEMP}/mpc-playing.jpg" 2>${MPC_TEMP}/mpc-notif.log
notify-send "ncmpcpp" "󰎈 $trackTitle"'\n'" $trackArtist"'\n'"󰀥 $trackAlbum"
